<div class="container mt-5">
    <div class="mb-3">
        <label for="regiao" class="form-label">Selecione a região:</label>
        <select #regiao id="regiao" class="form-select" (change)="carregarCountries(regiao.value)">
            <option value="">Todas</option>
            <option value="Africa">Africa</option>
            <option value="Americas">Americas</option>
            <option value="Asia">Asia</option>
            <option value="Europe">Europe</option>
            <option value="Oceania">Oceania</option>
        </select>
    </div>
    <div *ngIf="!loading; else loadingSpinner">
        <div class="row">
            <div class="col-12">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered text-center align-middle">
                        <thead class="table-dark">
                            <tr>
                                <th>Bandeira</th>
                                <th>Nome</th>
                                <th>Região</th>
                                <th>Capital</th>
                                <th>População</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr
                                *ngFor="let country of countries | paginate: { itemsPerPage: itemsPerPage, currentPage: pagina }">
                                <td>
                                    <img [src]="country.flags.png" alt="Bandeira de {{ country.name.common }}"
                                        width="50" height="30">
                                </td>
                                <td>{{ country.name.common }}</td>
                                <td>{{ country.region }}</td>
                                <td>{{ country.capital ? country.capital[0] : 'N/A' }}</td>
                                <td>{{ country.population | number }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <pagination-controls class="mt-3" (pageChange)="pagina = $event"></pagination-controls>
            </div>
        </div>
    </div>

    <ng-template #loadingSpinner>
        <div class="text-center">
            <div class="spinner-border">
                <span class="visually-hidden">Carregando...</span>
            </div>
            <p>Carregando dados dos países...</p>
        </div>
    </ng-template>
</div>